DROP TABLE MEMBER CASCADE CONSTRAINTS PURGE;
DROP TABLE CABANG CASCADE CONSTRAINTS PURGE;
DROP TABLE JABATAN CASCADE CONSTRAINTS PURGE;
DROP TABLE ABSENSI CASCADE CONSTRAINTS PURGE;
DROP TABLE MENU CASCADE CONSTRAINTS PURGE;
DROP TABLE MENU_TENNANT CASCADE CONSTRAINTS PURGE;
DROP TABLE HTRANS CASCADE CONSTRAINTS PURGE;
DROP TABLE DTRANS CASCADE CONSTRAINTS PURGE;
DROP TABLE PEGAWAI CASCADE CONSTRAINTS PURGE;
DROP TABLE PROMO CASCADE CONSTRAINTS PURGE;
DROP TABLE TENNANT CASCADE CONSTRAINTS PURGE;


CREATE TABLE MEMBER(
	ID_MEMBER VARCHAR2(6) CONSTRAINT PK_MEMBER PRIMARY KEY,
	NAMA_MEMBER VARCHAR2(50),
	TGLLAHIR_MEMBER DATE,
	NOHP_MEMBER VARCHAR2(13)
);

CREATE TABLE CABANG(
	ID_CABANG VARCHAR2(3) CONSTRAINT PK_CABANG PRIMARY KEY,
	NAMA_CABANG VARCHAR2(50),
	ALAMAT_CABANG VARCHAR2(50),
	TELP_CABANG VARCHAR2(13)
);

CREATE TABLE JABATAN(
	ID_JABATAN VARCHAR2(2) CONSTRAINT PK_JABATAN PRIMARY KEY,
	NAMA_JABATAN VARCHAR2(15),
	GAJI_POKOK NUMBER(8),
	GAJI_LEMBUR NUMBER(6)
);

CREATE TABLE PEGAWAI(
	ID_PEGAWAI VARCHAR2(5) CONSTRAINT PK_PEGAWAI PRIMARY KEY,
	NAMA_PEGAWAI VARCHAR2(50),
	TGLLAHIR_PEGAWAI DATE,
	NOHP_PEGAWAI VARCHAR2(13),
	JABATAN_PEGAWAI VARCHAR2(2) CONSTRAINT FK_JABATAN_PEGAWAI REFERENCES JABATAN(ID_JABATAN),
	CABANG_PEGAWAI VARCHAR2(3) CONSTRAINT FK_CABANG_PEGAWAI REFERENCES CABANG(ID_CABANG)
);

CREATE TABLE ABSENSI(
	ID_PEGAWAI VARCHAR2(6) CONSTRAINT FK_ABSENSI_PEGAWAI REFERENCES PEGAWAI(ID_PEGAWAI),
	TGL_ABSENSI DATE,
	JAM_MASUK DATE,
	JAM_KELUAR DATE,
	CONSTRAINT PK_ABSENSI PRIMARY KEY (ID_PEGAWAI, TGL_ABSENSI)
);

CREATE TABLE TENNANT(
	ID_TENNANT VARCHAR2(5) CONSTRAINT PK_TENNANT PRIMARY KEY,
	NAMA_TENNANT VARCHAR2(30),
	ID_CABANG VARCHAR2(50) CONSTRAINT FK_ID_CABANG REFERENCES CABANG(ID_CABANG)
);

CREATE TABLE MENU(
	ID_MENU VARCHAR2(5) CONSTRAINT PK_MENU PRIMARY KEY,
	NAMA_MENU VARCHAR2(50),
	DESKRIPSI_MENU VARCHAR2(120) NULL
);

CREATE TABLE MENU_TENNANT(
	ID_MENU VARCHAR2(5) CONSTRAINT FK_MENU REFERENCES MENU(ID_MENU),
	ID_TENNANT VARCHAR2(3) CONSTRAINT FK_CABANG_MENU REFERENCES CABANG(ID_CABANG),
	HARGA_MENU NUMBER(7),
	CONSTRAINT PK_MENU_TENNANT PRIMARY KEY (ID_MENU, ID_TENNANT)
);

CREATE TABLE HTRANS(
	ID_TRANS VARCHAR2(15) CONSTRAINT PK_TRANS PRIMARY KEY,
	WAKTU_TRANS DATE,
	TOTAL_TRANS NUMBER(10),
	ID_PROMO VARCHAR2(5),
	ID_MEMBER VARCHAR2(5),
	ID_KASIR VARCHAR2(5) CONSTRAINT FK_PEGAWAI_TRANS REFERENCES PEGAWAI(ID_PEGAWAI)
);

CREATE TABLE DTRANS(
	ID_TRANS VARCHAR2(15) CONSTRAINT FK_TRANS REFERENCES HTRANS(ID_TRANS),
	ID_MENU VARCHAR2(5) CONSTRAINT FK_MENU_DTRANS REFERENCES MENU(ID_MENU),
	JML_MENU NUMBER(3),
	HARGA_MENU NUMBER(7),
	CONSTRAINT PK_DTRANS PRIMARY KEY (ID_TRANS, ID_MENU)
);

CREATE TABLE PROMO(
	ID_PROMO VARCHAR2(5) CONSTRAINT PK_PROMO PRIMARY KEY,
	TITLE_PROMO VARCHAR2(30),
	JML_PROMO NUMBER (6)
);

commit;


